(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-acf9259a"],{"00c6":function(e,t,c){"use strict";c.r(t);var o=c("7a23"),r={class:"post-page"},n={class:"post-page-title"},a={class:"post-page-tail"},l={class:"reply-box-container"},i=Object(o["createVNode"])("div",{class:"reply-box-title"},"Reply",-1),s=Object(o["createTextVNode"])("Reply");function u(e,t,c,u,p,d){var b=Object(o["resolveComponent"])("post-page-level"),j=Object(o["resolveComponent"])("el-card"),O=Object(o["resolveComponent"])("el-pagination"),v=Object(o["resolveComponent"])("rich-text-editor"),f=Object(o["resolveComponent"])("el-button"),h=Object(o["resolveDirective"])("loading");return Object(o["openBlock"])(),Object(o["createBlock"])("div",r,[Object(o["createVNode"])(j,{shadow:"never",class:"post-page-body"},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createVNode"])("div",null,[Object(o["createVNode"])("div",n,Object(o["toDisplayString"])(e.title),1),(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.levelList,(function(t){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"post-page-level-container",key:t.level},[Object(o["createVNode"])(b,{userAvatarUrl:t.userAvatarUrl,userName:t.userName,level:t.level,content:t.content,date:t.date,isPoster:t.isPoster,isYou:t.isYou,onReplyTextClick:e.onReplyTextClicked},null,8,["userAvatarUrl","userName","level","content","date","isPoster","isYou","onReplyTextClick"])])})),128)),Object(o["createVNode"])("div",a,"Replies: "+Object(o["toDisplayString"])(e.levelNum),1)],512),[[h,e.isLoadingPage]])]})),_:1}),Object(o["createVNode"])(O,{background:"",layout:"prev, pager, next, jumper","page-size":e.pageSize,"page-count":5,"current-page":e.currentPage,total:e.levelNum,onCurrentChange:e.onCurrentPageChanged},null,8,["page-size","current-page","total","onCurrentChange"]),Object(o["createVNode"])(j,{shadow:"never"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("div",l,[i,Object(o["createVNode"])(v,{modelValue:e.replyBoxTextArea,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.replyBoxTextArea=t})},null,8,["modelValue"]),Object(o["createVNode"])(f,{type:"primary",onClick:e.onReply},{default:Object(o["withCtx"])((function(){return[s]})),_:1},8,["onClick"])])]})),_:1})])}c("7f17"),c("f3fc");var p,d,b=c("6573"),j=c.n(b),O=c("d4ec"),v=c("262e"),f=c("2caf"),h=(c("99af"),c("25eb"),c("a9e3"),c("9ab4")),g=c("8973"),N=c("ce1f"),m=c("0a4d"),y={class:"post-page-level"},x={class:"level-box"},V={class:"level-box-left"},C={class:"level-box-user-avatar"},k={class:"level-box-user-name-container"},w={class:"level-box-user-name"},B={key:0},T=Object(o["createTextVNode"])("Poster"),P={key:1},L=Object(o["createTextVNode"])("You"),S={class:"level-box-right"},_={class:"level-box-content",ref:"content"},A={class:"level-box-corner"},D=Object(o["createTextVNode"])("Reply"),R={key:0},$=Object(o["createTextVNode"])(" | "),I=Object(o["createTextVNode"])("Edit"),Y={key:1},z=Object(o["createTextVNode"])(" | "),M=Object(o["createTextVNode"])("Delete");function U(e,t,c,r,n,a){var l=Object(o["resolveComponent"])("el-avatar"),i=Object(o["resolveComponent"])("el-tag"),s=Object(o["resolveComponent"])("el-link"),u=Object(o["resolveComponent"])("el-card");return Object(o["openBlock"])(),Object(o["createBlock"])("div",y,[Object(o["createVNode"])(u,{shadow:"never"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("div",x,[Object(o["createVNode"])("div",V,[Object(o["createVNode"])("div",C,[Object(o["createVNode"])(l,{size:"large",shape:"square",src:e.userAvatarUrl},null,8,["src"])]),Object(o["createVNode"])("div",k,[Object(o["createVNode"])("div",w,Object(o["toDisplayString"])(e.userName),1),e.isPoster?(Object(o["openBlock"])(),Object(o["createBlock"])("div",B,[Object(o["createVNode"])(i,{class:"poster-tag",type:"warning"},{default:Object(o["withCtx"])((function(){return[T]})),_:1})])):Object(o["createCommentVNode"])("",!0),e.isYou?(Object(o["openBlock"])(),Object(o["createBlock"])("div",P,[Object(o["createVNode"])(i,null,{default:Object(o["withCtx"])((function(){return[L]})),_:1})])):Object(o["createCommentVNode"])("",!0)])]),Object(o["createVNode"])("div",S,[Object(o["createVNode"])("div",_,null,512),Object(o["createVNode"])("div",A,[Object(o["createVNode"])("span",null,[Object(o["createTextVNode"])(" L"+Object(o["toDisplayString"])(e.level)+" "+Object(o["toDisplayString"])(e.date)+" ",1),Object(o["createVNode"])(s,{type:"primary",onClick:t[1]||(t[1]=Object(o["withModifiers"])((function(t){return e.$emit("replyTextClick")}),["prevent"]))},{default:Object(o["withCtx"])((function(){return[D]})),_:1}),e.isYou?(Object(o["openBlock"])(),Object(o["createBlock"])("span",R,[$,Object(o["createVNode"])(s,{type:"primary",onClick:t[2]||(t[2]=Object(o["withModifiers"])((function(){}),["prevent"]))},{default:Object(o["withCtx"])((function(){return[I]})),_:1})])):Object(o["createCommentVNode"])("",!0),e.canDelete?(Object(o["openBlock"])(),Object(o["createBlock"])("span",Y,[z,Object(o["createVNode"])(s,{type:"primary",onClick:t[3]||(t[3]=Object(o["withModifiers"])((function(){}),["prevent"]))},{default:Object(o["withCtx"])((function(){return[M]})),_:1})])):Object(o["createCommentVNode"])("",!0)])])])])]})),_:1})])}var q=(p=Object(N["a"])({props:{userAvatarUrl:String,userName:String,content:String,level:Number,date:String,isPoster:Boolean,isYou:Boolean},emits:["replyTextClick"],computed:{canDelete:function(){return this.isYou}},mounted:function(){this.$refs.content.innerHTML=this.content},watch:{content:function(e){this.$refs.content.innerHTML=e}}}),p(d=function(e){Object(v["a"])(c,e);var t=Object(f["a"])(c);function c(){return Object(O["a"])(this,c),t.apply(this,arguments)}return c}(N["b"]))||d);c("05cc");q.render=U;var H=q,E=function(e){Object(v["a"])(c,e);var t=Object(f["a"])(c);function c(){return Object(O["a"])(this,c),t.apply(this,arguments)}return c}(N["b"]);E=Object(h["a"])([Object(N["a"])({components:{"rich-text-editor":m["a"],"post-page-level":H},data:function(){return{title:"",postId:"",currentPage:1,replyBoxTextArea:"",isLoadingPage:!1,levelList:[],levelNum:0,pageSize:2}},created:function(){var e=this;this.$watch((function(){return e.$route.query}),(function(){"/post"===e.$route.path&&e.loadLevels()}))},mounted:function(){this.loadLevels()},methods:{onReply:function(){var e=this;""!==this.replyBoxTextArea?g["a"].reply(this.postId,this.replyBoxTextArea).then((function(){j.a.success("You've just replied in a post"),e.replyBoxTextArea="";var t=Math.ceil((e.levelNum+1)/e.pageSize);e.currentPage!==t?e.$router.push("/post?post_id=".concat(e.postId,"&page=").concat(t)):e.loadLevels()})).catch((function(e){j.a.error("Can't reply. "+e)})):j.a.error("The reply content mustn't be empty!")},onReplyTextClicked:function(){window.scroll({top:document.body.clientHeight,left:0,behavior:"smooth"})},loadLevels:function(){var e=this;this.postId=this.$route.query.post_id;var t=Number.parseInt(this.$route.query.page);t||(t=1),this.isLoadingPage=!0,g["a"].getPostInfo(this.postId).then((function(c){var o=c;return e.levelNum=o.levelNum,e.title=o.title,e.currentPage=t,g["a"].getPostLevelList(e.postId,e.pageSize,e.currentPage)})).catch((function(e){j.a.error("Error happing while loading post page. "+e)})).then((function(t){e.levelList=t})).then((function(){e.isLoadingPage=!1}))},onCurrentPageChanged:function(e){this.$router.push("/post?post_id=".concat(this.postId,"&page=").concat(e))}}})],E);var J=E;c("1ec5");J.render=u;t["default"]=J},"05cc":function(e,t,c){"use strict";c("996c")},"1ec5":function(e,t,c){"use strict";c("838a")},"838a":function(e,t,c){},"996c":function(e,t,c){}}]);
//# sourceMappingURL=chunk-acf9259a.50efeae0.js.map