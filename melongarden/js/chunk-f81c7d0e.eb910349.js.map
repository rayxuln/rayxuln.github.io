{"version":3,"sources":["webpack:///./src/views/PostPage.vue","webpack:///./src/components/PostPageLevel.vue","webpack:///./src/components/PostPageLevel.vue?d82b","webpack:///./src/components/PostPageLevel.vue?6149","webpack:///./src/plugins/prism_wrap.js","webpack:///./src/views/PostPage.vue?6892","webpack:///./src/views/PostPage.vue?0f87","webpack:///./src/views/PostPage.vue?f24b","webpack:///./src/components/PostPageLevel.vue?a8ba"],"names":["class","shadow","title","content","$router","push","levelList","l","key","level","userAvatarUrl","userName","date","isPoster","isYou","onReplyTextClicked","onDeleteTextClicked","levelNum","isLoadingPage","background","layout","page-size","pageSize","page-count","current-page","currentPage","total","filteredLevelNum","onCurrentPageChanged","replyBoxTextArea","type","onReply","ref","size","shape","src","displayEditor","editContent","$emit","canDelete","props","String","Number","Boolean","editMode","default","components","RichTextEditor","emits","data","computed","this","mounted","showContent","watch","newValue","$nextTick","methods","html","$refs","innerHTML","render","PrismHighlightAll","Prism","highlightAll","postId","created","$watch","$route","query","path","loadLevels","APIs","reply","then","success","newPage","Math","ceil","catch","e","error","window","scroll","top","document","body","clientHeight","left","behavior","$confirm","confirmButtonText","cancelButtonText","post_id","parseInt","page","filter","search","getPostInfo","value","v","getPostLevelList","levels","pageNumber","r","hash","params"],"mappings":"4IACOA,MAAM,a,GAoBJA,MAAM,kB,GAgBNA,MAAM,uB,EACT,yBAAwC,OAAnCA,MAAM,mBAAkB,SAAK,G,+BAES,S,yYAvC/C,yBA0CM,MA1CN,EA0CM,CAzCJ,yBAsBU,GAtBDC,OAAO,QAAQD,MAAM,kB,+BAC9B,iBAoBM,C,4BApBN,yBAoBM,YAlBN,yBAAqF,GAArEE,MAAM,GAAIC,QAAS,EAAAD,MAAQ,OAAI,+BAAE,EAAAE,QAAQC,KAAI,Q,gDAE7D,yBAYM,2CAZ6C,EAAAC,WAAS,SAAdC,G,gCAA9C,yBAYM,OAZDP,MAAM,4BAAoDQ,IAAKD,EAAEE,O,CACpE,yBAUkB,GATfC,cAAeH,EAAEG,cACjBC,SAAUJ,EAAEI,SACZF,MAAOF,EAAEE,MACTN,QAASI,EAAEJ,QACXS,KAAML,EAAEK,KACRC,SAAUN,EAAEM,SACZC,MAAOP,EAAEO,MACT,iBAAgB,EAAAC,mBAChB,kBAAiB,EAAAC,qB,mIAItB,yBAAyD,MAAzD,EAA4B,YAAS,6BAAG,EAAAC,UAAQ,I,SAlBhC,EAAAC,qB,MAuBhB,yBAQgB,GAPdC,WAAA,GACAC,OAAO,4BACNC,YAAW,EAAAC,SACXC,aAAY,EACZC,eAAc,EAAAC,YACdC,MAAO,EAAAC,iBACP,gBAAgB,EAAAC,sB,+DAGnB,yBAMU,GAND3B,OAAO,SAAO,C,8BACvB,iBAIM,CAJN,yBAIM,MAJN,EAIM,CAHJ,EACA,yBAAgE,G,WAArC,EAAA4B,iB,qDAAA,EAAAA,iBAAgB,K,uBAC3C,yBAA4D,GAAjDC,KAAK,UAAW,QAAO,EAAAC,S,+BAAS,iBAAK,C,8OCvC/C/B,MAAM,mB,GAEJA,MAAM,a,GACJA,MAAM,kB,GACJA,MAAM,yB,GACNA,MAAM,iC,GACJA,MAAM,uB,yCACoD,U,yCACrC,O,GAGzBA,MAAM,mB,SAEGA,MAAM,oBAAoBgC,IAAI,W,GACrChC,MAAM,oB,yCAEgC,Q,+BAAc,O,+BACU,U,yCAGE,S,yCAC9C,O,+BAAiE,Q,yCAC7D,O,+BAAqE,U,6RAtBtG,yBA4BM,MA5BN,EA4BM,CA3BN,yBA0BU,GA1BDC,OAAO,SAAO,C,8BACrB,iBAwBM,CAxBN,yBAwBM,MAxBN,EAwBM,CAvBJ,yBAOM,MAPN,EAOM,CANJ,yBAAiH,MAAjH,EAAiH,CAA9E,yBAAwE,GAA7DgC,KAAK,QAAQC,MAAM,SAAUC,IAAK,EAAAzB,e,kBAChF,yBAIM,MAJN,EAIM,CAHJ,yBAAqD,MAArD,EAAqD,6BAAjB,EAAAC,UAAQ,GACjC,EAAAE,U,yBAAX,yBAAoF,SAA/D,yBAAyD,GAAjDb,MAAM,aAAa8B,KAAK,W,+BAAU,iBAAM,C,sDAC1D,EAAAhB,O,yBAAX,yBAA4C,SAA1B,yBAAoB,Q,8BAAZ,iBAAG,C,0DAGjC,yBAcM,MAdN,EAcM,CAboB,EAAAsB,e,yBAAxB,yBAAgF,G,iBAAhC,EAAAC,Y,qDAAA,EAAAA,YAAW,K,kDAC3D,yBAA0D,MAA1D,EAA0D,WAC1D,yBAUM,MAVN,EAUM,CATQ,EAAAD,e,yBAAZ,yBAGO,U,6BAHoB,IAAC,6BAAG,EAAA3B,OAAQ,IACrC,4BAAqD,GAA5CqB,KAAK,UAAW,QAAK,wCAAN,cAAc,e,+BAAC,iBAAI,C,cAC3C,yBAA+E,GAAtEA,KAAK,UAAW,QAAK,2DAAU,EAAAM,eAAa,mB,+BAAU,iBAAM,C,yCAEvE,yBAIO,U,6BAJM,KAAE,6BAAG,EAAA3B,OAAQ,IAAC,6BAAG,EAAAG,MAAO,IACnC,4BAAgF,GAAvEkB,KAAK,UAAW,QAAK,2DAAU,EAAAQ,MAAK,mC,+BAAoB,iBAAK,C,YAC1D,EAAAxB,O,yBAAZ,yBAAyG,U,EAAnF,yBAA4E,GAAnEgB,KAAK,UAAW,QAAK,2DAAU,EAAAM,eAAa,mB,+BAAS,iBAAI,C,sDAC5E,EAAAG,W,yBAAZ,yBAAmH,U,EAAzF,yBAAkF,GAAzET,KAAK,UAAW,QAAK,2DAAU,EAAAQ,MAAK,oC,+BAAqB,iBAAM,C,2ECoC9G,IAAqB,EAArB,qIAA2C,QAAtB,EAAa,gBAvDjC,eAAQ,CACPE,MAAO,CACL9B,cAAe+B,OACf9B,SAAU8B,OACVtC,QAASsC,OACThC,MAAOiC,OACP9B,KAAM6B,OACN5B,SAAU8B,QACV7B,MAAO6B,QACPC,SAAU,CACRd,KAAMa,QACNE,SAAS,IAGbC,WAAY,CACV,mBAAoBC,EAAA,MAEtBC,MAAO,CAAC,iBAAkB,mBAC1BC,KAlBO,WAmBL,MAAO,CACLb,eAAe,EACfC,YAAa,QAGjBa,SAAU,CACRX,UADQ,WAEN,OAAOY,KAAKrC,QAGhBsC,QA7BO,WA8BLD,KAAKE,YAAYF,KAAKhD,UAExBmD,MAAO,CACLnD,QADK,SACIoD,GACPJ,KAAKE,YAAYE,IAEnBX,SAJK,SAIKW,GACRJ,KAAKf,cAAgBmB,GAEvBnB,cAPK,SAOUmB,GAAQ,WACjBA,EACFJ,KAAKd,YAAcc,KAAKhD,QAExBgD,KAAKK,WAAU,WACb,EAAKH,YAAY,EAAKlD,cAK9BsD,QAAS,CACPJ,YADO,SACMK,GACXP,KAAKQ,MAAMxD,QAAQyD,UAAYF,OAIhB,W,UCtDrB,EAAOG,OAAS,EAED,QCNR,SAASC,IACZC,MAAMC,eC+GV,IAAqB,EAArB,qIAAsC,QAAjB,EAAQ,gBAzG5B,eAAQ,CACPlB,WAAY,CACV,mBAAoBC,EAAA,KACpB,kBAAmB,GAErBE,KALO,WAML,MAAO,CACL/C,MAAO,GACP+D,OAAQ,GACRxC,YAAa,EACbI,iBAAkB,GAClBX,eAAe,EACfZ,UAAW,GACXW,SAAU,EACVU,iBAAkB,EAClBL,SAAU,IAGd4C,QAlBO,WAkBA,WACLf,KAAKgB,QACH,kBAAM,EAAKC,OAAOC,SAClB,WAC2B,UAArB,EAAKD,OAAOE,MACd,EAAKC,iBAKbnB,QA5BO,WA6BLD,KAAKoB,cAEPd,QAAS,CACP1B,QADO,WACA,WACyB,KAA1BoB,KAAKtB,iBAKT2C,EAAA,KAAKC,MAAMtB,KAAKc,OAAQd,KAAKtB,kBAAkB6C,MAAK,WAClD,IAAUC,QAAQ,iCAClB,EAAK9C,iBAAmB,GACxB,IAAM+C,EAAUC,KAAKC,MAAM,EAAK7D,SAAW,GAAK,EAAKK,UACjD,EAAKG,cAAgBmD,EACvB,EAAKxE,QAAQC,KAAb,wBAAmC,EAAK4D,OAAxC,iBAAuDW,IAEvD,EAAKL,gBAENQ,OAAM,SAACC,GACR,IAAUC,MAAM,gBAAmBD,MAdnC,IAAUC,MAAM,wCAiBpBlE,mBApBO,WAqBLmE,OAAOC,OAAO,CAAEC,IAAKC,SAASC,KAAKC,aAAcC,KAAM,EAAGC,SAAU,YAEtEzE,oBAvBO,WAwBLmC,KAAKuC,SAAS,qCAAsC,UAAW,CAC7DC,kBAAmB,YACnBC,iBAAkB,cAClB9D,KAAM,aAGVyC,WA9BO,WA8BG,WACRpB,KAAKc,OAASd,KAAKiB,OAAOC,MAAMwB,QAChC,IAAIpE,EAAciB,OAAOoD,SAAS3C,KAAKiB,OAAOC,MAAM0B,MAC/CtE,IACHA,EAAc,GAEhB,IAAMuE,EAAS7C,KAAKiB,OAAOC,MAAM4B,QAAU,GAE3C9C,KAAKjC,eAAgB,EAErBsD,EAAA,KAAK0B,YAAY/C,KAAKc,QAAQS,MAAK,SAACyB,GAClC,IAAMC,EAAID,EAGV,OAFA,EAAKlF,SAAWmF,EAAEnF,SAClB,EAAKf,MAAQkG,EAAElG,MACRsE,EAAA,KAAK6B,iBAAiB,EAAKpC,OAAQ,EAAK3C,SAAUG,EAAauE,MACrEtB,MAAK,SAACyB,GACP,IAAMC,EAAID,EACV,EAAK7F,UAAY8F,EAAEE,OACnB,EAAK3E,iBAAmByE,EAAEnF,SACtB,EAAKQ,cAAgBA,IACvB,EAAKA,aAAe,GAEtB,EAAKA,YAAcA,EAEnB,EAAK+B,WAAU,WACbM,UAEDiB,OAAM,SAACC,GACR,IAAUC,MAAM,0CAA4CD,MAC3DN,MAAK,WACN,EAAKxD,eAAgB,MAGzBU,qBA/DO,SA+De2E,GACpB,IAAMC,EAAI,CACRlC,KAAMnB,KAAKiB,OAAOE,KAClBD,MAAO,iCAAKlB,KAAKiB,OAAOC,OAAnB,IAA0B0B,KAAMQ,IACrCE,KAAMtD,KAAKiB,OAAOqC,KAClBC,OAAQ,kBAAKvD,KAAKiB,OAAOsC,SAE3BvD,KAAK/C,QAAQC,KAAKmG,QAIH,W,UC5GrB,EAAO3C,OAASA,EAED,gB,oCCPf,W,kCCAA,W","file":"js/chunk-f81c7d0e.eb910349.js","sourcesContent":["<template>\n  <div class=\"post-page\">\n    <el-card shadow=\"never\" class=\"post-page-body\">\n    <div v-loading=\"isLoadingPage\">\n    <!--div class=\"post-page-title\">{{ title }}</div-->\n    <el-page-header title=\"\" :content=\"title\" @back=\"$router.push('/')\"></el-page-header>\n\n    <div class=\"post-page-level-container\" v-for=\"l in levelList\" :key=\"l.level\">\n      <post-page-level\n        :userAvatarUrl=\"l.userAvatarUrl\"\n        :userName=\"l.userName\"\n        :level=\"l.level\"\n        :content=\"l.content\"\n        :date=\"l.date\"\n        :isPoster=\"l.isPoster\"\n        :isYou=\"l.isYou\"\n        @replyTextClick=\"onReplyTextClicked\"\n        @deleteTextClick=\"onDeleteTextClicked\">\n      </post-page-level>\n    </div>\n\n    <div class=\"post-page-tail\">Replies: {{ levelNum }}</div>\n\n    </div>\n    </el-card>\n\n    <el-pagination\n      background\n      layout=\"prev, pager, next, jumper\"\n      :page-size=\"pageSize\"\n      :page-count=\"5\"\n      :current-page=\"currentPage\"\n      :total=\"filteredLevelNum\"\n      @current-change=\"onCurrentPageChanged\">\n    </el-pagination>\n\n    <el-card shadow=\"never\">\n    <div class=\"reply-box-container\">\n      <div class=\"reply-box-title\">Reply</div>\n      <rich-text-editor v-model=\"replyBoxTextArea\"></rich-text-editor>\n      <el-button type=\"primary\" @click=\"onReply\">Reply</el-button>\n    </div>\n    </el-card>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport APIs from '@/APIs'\nimport { Options, Vue } from 'vue-class-component'\nimport RichTextEditor from '@/components/RichTextEditor.vue'\nimport PostPageLevel from '@/components/PostPageLevel.vue'\nimport { ElMessage } from 'element-plus'\nimport { PrismHighlightAll } from '@/plugins/prism_wrap'\n\n@Options({\n  components: {\n    'rich-text-editor': RichTextEditor,\n    'post-page-level': PostPageLevel\n  },\n  data () {\n    return {\n      title: '',\n      postId: '',\n      currentPage: 1,\n      replyBoxTextArea: '',\n      isLoadingPage: false,\n      levelList: [],\n      levelNum: 0,\n      filteredLevelNum: 0,\n      pageSize: 2\n    }\n  },\n  created () {\n    this.$watch(\n      () => this.$route.query,\n      () => {\n        if (this.$route.path === '/post') {\n          this.loadLevels()\n        }\n      }\n    )\n  },\n  mounted () {\n    this.loadLevels()\n  },\n  methods: {\n    onReply () {\n      if (this.replyBoxTextArea === '') {\n        ElMessage.error('The reply content mustn\\'t be empty!')\n        return\n      }\n\n      APIs.reply(this.postId, this.replyBoxTextArea).then(() => {\n        ElMessage.success('You\\'ve just replied in a post')\n        this.replyBoxTextArea = ''\n        const newPage = Math.ceil((this.levelNum + 1) / this.pageSize)\n        if (this.currentPage !== newPage) {\n          this.$router.push(`/post?post_id=${this.postId}&page=${newPage}`)\n        } else {\n          this.loadLevels()\n        }\n      }).catch((e) => {\n        ElMessage.error('Can\\'t reply. ' + e)\n      })\n    },\n    onReplyTextClicked () {\n      window.scroll({ top: document.body.clientHeight, left: 0, behavior: 'smooth' })\n    },\n    onDeleteTextClicked () {\n      this.$confirm('Are you sure to delete this level?', 'Warning', {\n        confirmButtonText: 'Of caurse',\n        cancelButtonText: 'No sure yet',\n        type: 'warning'\n      })\n    },\n    loadLevels () {\n      this.postId = this.$route.query.post_id\n      let currentPage = Number.parseInt(this.$route.query.page)\n      if (!currentPage) {\n        currentPage = 1\n      }\n      const filter = this.$route.query.search || ''\n\n      this.isLoadingPage = true\n\n      APIs.getPostInfo(this.postId).then((value) => {\n        const v = value as {levelNum:number, title:string}\n        this.levelNum = v.levelNum\n        this.title = v.title\n        return APIs.getPostLevelList(this.postId, this.pageSize, currentPage, filter)\n      }).then((value) => {\n        const v = value as { levels:unknown, levelNum:number }\n        this.levelList = v.levels\n        this.filteredLevelNum = v.levelNum\n        if (this.currentPage !== currentPage) {\n          this.currentPage = -1\n        }\n        this.currentPage = currentPage\n\n        this.$nextTick(() => {\n          PrismHighlightAll()\n        })\n      }).catch((e) => {\n        ElMessage.error('Error happing while loading post page. ' + e)\n      }).then(() => {\n        this.isLoadingPage = false\n      })\n    },\n    onCurrentPageChanged (pageNumber:number) {\n      const r = {\n        path: this.$route.path,\n        query: { ...this.$route.query, page: pageNumber },\n        hash: this.$route.hash,\n        params: { ...this.$route.params }\n      }\n      this.$router.push(r)\n    }\n  }\n})\nexport default class PostPage extends Vue {}\n</script>\n\n<style scope>\n.post-page{\n  text-align: left;\n}\n\n.post-page-body{\n  margin-bottom: 15px;\n}\n\n.post-page-title{\n  font-size: 24px;\n  margin-bottom: 15px;\n}\n\n.post-page-tail{\n  margin-top: 5px;\n  margin-bottom: -5px;\n}\n\n.el-pagination{\n  margin-bottom: 15px;\n  text-align: center;\n}\n\n.reply-box-container{\n  text-align: left;\n}\n\n.reply-box-container > div{\n  margin-bottom: 15px;\n}\n\n.reply-box-title{\n  font-size: 32px;\n  margin: 5px;\n}\n\n.el-page-header{\n  margin-bottom: 15px;\n}\n\n</style>\n","<template>\n  <div class=\"post-page-level\">\n  <el-card shadow=\"never\">\n    <div class=\"level-box\">\n      <div class=\"level-box-left\">\n        <div class=\"level-box-user-avatar\"><el-avatar size=\"large\" shape=\"square\" :src=\"userAvatarUrl\"></el-avatar></div>\n        <div class=\"level-box-user-name-container\">\n          <div class=\"level-box-user-name\">{{ userName }}</div>\n          <div v-if=\"isPoster\"><el-tag class=\"poster-tag\" type=\"warning\">Poster</el-tag></div>\n          <div v-if=\"isYou\"><el-tag>You</el-tag></div>\n        </div>\n      </div>\n      <div class=\"level-box-right\">\n        <rich-text-editor v-if=\"displayEditor\" v-model=\"editContent\"></rich-text-editor>\n        <div v-else class=\"level-box-content\" ref=\"content\"></div>\n        <div class=\"level-box-corner\">\n          <span v-if=\"displayEditor\">L{{ level }}\n            <el-link type=\"primary\" @click.prevent>Save</el-link> |\n            <el-link type=\"primary\" @click.prevent=\"displayEditor = false\">Cancel</el-link>\n          </span>\n          <span v-else> L{{ level }} {{ date }}\n            <el-link type=\"primary\" @click.prevent=\"$emit('replyTextClick')\">Reply</el-link>\n            <span v-if=\"isYou\"> | <el-link type=\"primary\" @click.prevent=\"displayEditor = true\">Edit</el-link></span>\n            <span v-if=\"canDelete\"> | <el-link type=\"primary\" @click.prevent=\"$emit('deleteTextClick')\">Delete</el-link></span>\n          </span>\n        </div>\n      </div>\n    </div>\n  </el-card>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport RichTextEditor from '@/components/RichTextEditor.vue'\n\n@Options({\n  props: {\n    userAvatarUrl: String,\n    userName: String,\n    content: String,\n    level: Number,\n    date: String,\n    isPoster: Boolean,\n    isYou: Boolean,\n    editMode: {\n      type: Boolean,\n      default: false\n    }\n  },\n  components: {\n    'rich-text-editor': RichTextEditor\n  },\n  emits: ['replyTextClick', 'deleteTextClick'],\n  data () {\n    return {\n      displayEditor: false,\n      editContent: '666'\n    }\n  },\n  computed: {\n    canDelete () {\n      return this.isYou\n    }\n  },\n  mounted () {\n    this.showContent(this.content)\n  },\n  watch: {\n    content (newValue) {\n      this.showContent(newValue)\n    },\n    editMode (newValue) {\n      this.displayEditor = newValue\n    },\n    displayEditor (newValue) {\n      if (newValue) {\n        this.editContent = this.content\n      } else {\n        this.$nextTick(() => {\n          this.showContent(this.content)\n        })\n      }\n    }\n  },\n  methods: {\n    showContent (html:string) {\n      this.$refs.content.innerHTML = html\n    }\n  }\n})\nexport default class PostPageLevel extends Vue {}\n</script>\n\n<style scope>\n.level-box{\n  display: flex;\n  flex-direction: row;\n  justify-items: stretch;\n  align-items: stretch;\n  margin: -20px;\n}\n\n.level-box-left{\n  background-color: rgb(247, 249, 251);\n  min-height: 300px;\n  border-right: 1px solid #EBEEF5;\n}\n\n.level-box-right{\n  width: 100%;\n  padding: 15px;\n  display: flex;\n  flex-direction: column;\n}\n\n.level-box-user-avatar{\n  margin: 50px;\n  margin-top: 75px;\n  margin-bottom: 15px;\n}\n\n.level-box-user-name-container{\n  text-align: center;\n}\n\n.level-box-user-name{\n  margin-bottom: 15px;\n}\n\n.level-box-corner{\n  margin-top: auto;\n  text-align: right;\n}\n\n</style>\n","\nimport { Options, Vue } from 'vue-class-component'\nimport RichTextEditor from '@/components/RichTextEditor.vue'\n\n@Options({\n  props: {\n    userAvatarUrl: String,\n    userName: String,\n    content: String,\n    level: Number,\n    date: String,\n    isPoster: Boolean,\n    isYou: Boolean,\n    editMode: {\n      type: Boolean,\n      default: false\n    }\n  },\n  components: {\n    'rich-text-editor': RichTextEditor\n  },\n  emits: ['replyTextClick', 'deleteTextClick'],\n  data () {\n    return {\n      displayEditor: false,\n      editContent: '666'\n    }\n  },\n  computed: {\n    canDelete () {\n      return this.isYou\n    }\n  },\n  mounted () {\n    this.showContent(this.content)\n  },\n  watch: {\n    content (newValue) {\n      this.showContent(newValue)\n    },\n    editMode (newValue) {\n      this.displayEditor = newValue\n    },\n    displayEditor (newValue) {\n      if (newValue) {\n        this.editContent = this.content\n      } else {\n        this.$nextTick(() => {\n          this.showContent(this.content)\n        })\n      }\n    }\n  },\n  methods: {\n    showContent (html:string) {\n      this.$refs.content.innerHTML = html\n    }\n  }\n})\nexport default class PostPageLevel extends Vue {}\n","import { render } from \"./PostPageLevel.vue?vue&type=template&id=8d1a6a3e\"\nimport script from \"./PostPageLevel.vue?vue&type=script&lang=ts\"\nexport * from \"./PostPageLevel.vue?vue&type=script&lang=ts\"\n\nimport \"./PostPageLevel.vue?vue&type=style&index=0&id=8d1a6a3e&scope=true&lang=css\"\nscript.render = render\n\nexport default script","/* eslint-disable */\nexport function PrismHighlightAll () {\n    Prism.highlightAll()\n}\n","\nimport APIs from '@/APIs'\nimport { Options, Vue } from 'vue-class-component'\nimport RichTextEditor from '@/components/RichTextEditor.vue'\nimport PostPageLevel from '@/components/PostPageLevel.vue'\nimport { ElMessage } from 'element-plus'\nimport { PrismHighlightAll } from '@/plugins/prism_wrap'\n\n@Options({\n  components: {\n    'rich-text-editor': RichTextEditor,\n    'post-page-level': PostPageLevel\n  },\n  data () {\n    return {\n      title: '',\n      postId: '',\n      currentPage: 1,\n      replyBoxTextArea: '',\n      isLoadingPage: false,\n      levelList: [],\n      levelNum: 0,\n      filteredLevelNum: 0,\n      pageSize: 2\n    }\n  },\n  created () {\n    this.$watch(\n      () => this.$route.query,\n      () => {\n        if (this.$route.path === '/post') {\n          this.loadLevels()\n        }\n      }\n    )\n  },\n  mounted () {\n    this.loadLevels()\n  },\n  methods: {\n    onReply () {\n      if (this.replyBoxTextArea === '') {\n        ElMessage.error('The reply content mustn\\'t be empty!')\n        return\n      }\n\n      APIs.reply(this.postId, this.replyBoxTextArea).then(() => {\n        ElMessage.success('You\\'ve just replied in a post')\n        this.replyBoxTextArea = ''\n        const newPage = Math.ceil((this.levelNum + 1) / this.pageSize)\n        if (this.currentPage !== newPage) {\n          this.$router.push(`/post?post_id=${this.postId}&page=${newPage}`)\n        } else {\n          this.loadLevels()\n        }\n      }).catch((e) => {\n        ElMessage.error('Can\\'t reply. ' + e)\n      })\n    },\n    onReplyTextClicked () {\n      window.scroll({ top: document.body.clientHeight, left: 0, behavior: 'smooth' })\n    },\n    onDeleteTextClicked () {\n      this.$confirm('Are you sure to delete this level?', 'Warning', {\n        confirmButtonText: 'Of caurse',\n        cancelButtonText: 'No sure yet',\n        type: 'warning'\n      })\n    },\n    loadLevels () {\n      this.postId = this.$route.query.post_id\n      let currentPage = Number.parseInt(this.$route.query.page)\n      if (!currentPage) {\n        currentPage = 1\n      }\n      const filter = this.$route.query.search || ''\n\n      this.isLoadingPage = true\n\n      APIs.getPostInfo(this.postId).then((value) => {\n        const v = value as {levelNum:number, title:string}\n        this.levelNum = v.levelNum\n        this.title = v.title\n        return APIs.getPostLevelList(this.postId, this.pageSize, currentPage, filter)\n      }).then((value) => {\n        const v = value as { levels:unknown, levelNum:number }\n        this.levelList = v.levels\n        this.filteredLevelNum = v.levelNum\n        if (this.currentPage !== currentPage) {\n          this.currentPage = -1\n        }\n        this.currentPage = currentPage\n\n        this.$nextTick(() => {\n          PrismHighlightAll()\n        })\n      }).catch((e) => {\n        ElMessage.error('Error happing while loading post page. ' + e)\n      }).then(() => {\n        this.isLoadingPage = false\n      })\n    },\n    onCurrentPageChanged (pageNumber:number) {\n      const r = {\n        path: this.$route.path,\n        query: { ...this.$route.query, page: pageNumber },\n        hash: this.$route.hash,\n        params: { ...this.$route.params }\n      }\n      this.$router.push(r)\n    }\n  }\n})\nexport default class PostPage extends Vue {}\n","import { render } from \"./PostPage.vue?vue&type=template&id=13b9c2e2\"\nimport script from \"./PostPage.vue?vue&type=script&lang=ts\"\nexport * from \"./PostPage.vue?vue&type=script&lang=ts\"\n\nimport \"./PostPage.vue?vue&type=style&index=0&id=13b9c2e2&scope=true&lang=css\"\nscript.render = render\n\nexport default script","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./PostPage.vue?vue&type=style&index=0&id=13b9c2e2&scope=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./PostPageLevel.vue?vue&type=style&index=0&id=8d1a6a3e&scope=true&lang=css\""],"sourceRoot":""}