(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7adbea62"],{"00c6":function(e,t,c){"use strict";c.r(t);var r=c("7a23"),o={class:"post-page"},n={class:"post-page-tail"},a={class:"reply-box-container"},l=Object(r["createVNode"])("div",{class:"reply-box-title"},"Reply",-1),i=Object(r["createTextVNode"])("Reply");function s(e,t,c,s,u,d){var p=Object(r["resolveComponent"])("el-page-header"),b=Object(r["resolveComponent"])("post-page-level"),v=Object(r["resolveComponent"])("el-card"),j=Object(r["resolveComponent"])("el-pagination"),O=Object(r["resolveComponent"])("rich-text-editor"),h=Object(r["resolveComponent"])("el-button"),f=Object(r["resolveDirective"])("loading");return Object(r["openBlock"])(),Object(r["createBlock"])("div",o,[Object(r["createVNode"])(v,{shadow:"never",class:"post-page-body"},{default:Object(r["withCtx"])((function(){return[Object(r["withDirectives"])(Object(r["createVNode"])("div",null,[Object(r["createVNode"])(p,{title:"",content:e.title,onBack:t[1]||(t[1]=function(t){return e.$router.push(e.base_url)})},null,8,["content"]),(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.levelList,(function(t){return Object(r["openBlock"])(),Object(r["createBlock"])("div",{class:"post-page-level-container",key:t.level},[Object(r["createVNode"])(b,{userAvatarUrl:t.userAvatarUrl,userName:t.userName,level:t.level,content:t.content,date:t.date,isPoster:t.isPoster,isYou:t.isYou,onReplyTextClick:e.onReplyTextClicked},null,8,["userAvatarUrl","userName","level","content","date","isPoster","isYou","onReplyTextClick"])])})),128)),Object(r["createVNode"])("div",n,"Replies: "+Object(r["toDisplayString"])(e.levelNum),1)],512),[[f,e.isLoadingPage]])]})),_:1}),Object(r["createVNode"])(j,{background:"",layout:"prev, pager, next, jumper","page-size":e.pageSize,"page-count":5,"current-page":e.currentPage,total:e.filteredLevelNum,onCurrentChange:e.onCurrentPageChanged},null,8,["page-size","current-page","total","onCurrentChange"]),Object(r["createVNode"])(v,{shadow:"never"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])("div",a,[l,Object(r["createVNode"])(O,{modelValue:e.replyBoxTextArea,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.replyBoxTextArea=t})},null,8,["modelValue"]),Object(r["createVNode"])(h,{type:"primary",onClick:e.onReply},{default:Object(r["withCtx"])((function(){return[i]})),_:1},8,["onClick"])])]})),_:1})])}var u,d,p=c("5530"),b=(c("7f17"),c("f3fc"),c("6573")),v=c.n(b),j=c("d4ec"),O=c("262e"),h=c("2caf"),f=(c("99af"),c("25eb"),c("a9e3"),c("841c"),c("ac1f"),c("9ab4")),g=c("8973"),m=c("ce1f"),N=c("0a4d"),y={class:"post-page-level"},x={class:"level-box"},C={class:"level-box-left"},V={class:"level-box-user-avatar"},k={class:"level-box-user-name-container"},w={class:"level-box-user-name"},B={key:0},T=Object(r["createTextVNode"])("Poster"),P={key:1},L=Object(r["createTextVNode"])("You"),$={class:"level-box-right"},_={class:"level-box-content",ref:"content"},A={class:"level-box-corner"},S=Object(r["createTextVNode"])("Reply"),R={key:0},D=Object(r["createTextVNode"])(" | "),Y=Object(r["createTextVNode"])("Edit"),I={key:1},q=Object(r["createTextVNode"])(" | "),z=Object(r["createTextVNode"])("Delete");function M(e,t,c,o,n,a){var l=Object(r["resolveComponent"])("el-avatar"),i=Object(r["resolveComponent"])("el-tag"),s=Object(r["resolveComponent"])("el-link"),u=Object(r["resolveComponent"])("el-card");return Object(r["openBlock"])(),Object(r["createBlock"])("div",y,[Object(r["createVNode"])(u,{shadow:"never"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])("div",x,[Object(r["createVNode"])("div",C,[Object(r["createVNode"])("div",V,[Object(r["createVNode"])(l,{size:"large",shape:"square",src:e.userAvatarUrl},null,8,["src"])]),Object(r["createVNode"])("div",k,[Object(r["createVNode"])("div",w,Object(r["toDisplayString"])(e.userName),1),e.isPoster?(Object(r["openBlock"])(),Object(r["createBlock"])("div",B,[Object(r["createVNode"])(i,{class:"poster-tag",type:"warning"},{default:Object(r["withCtx"])((function(){return[T]})),_:1})])):Object(r["createCommentVNode"])("",!0),e.isYou?(Object(r["openBlock"])(),Object(r["createBlock"])("div",P,[Object(r["createVNode"])(i,null,{default:Object(r["withCtx"])((function(){return[L]})),_:1})])):Object(r["createCommentVNode"])("",!0)])]),Object(r["createVNode"])("div",$,[Object(r["createVNode"])("div",_,null,512),Object(r["createVNode"])("div",A,[Object(r["createVNode"])("span",null,[Object(r["createTextVNode"])(" L"+Object(r["toDisplayString"])(e.level)+" "+Object(r["toDisplayString"])(e.date)+" ",1),Object(r["createVNode"])(s,{type:"primary",onClick:t[1]||(t[1]=Object(r["withModifiers"])((function(t){return e.$emit("replyTextClick")}),["prevent"]))},{default:Object(r["withCtx"])((function(){return[S]})),_:1}),e.isYou?(Object(r["openBlock"])(),Object(r["createBlock"])("span",R,[D,Object(r["createVNode"])(s,{type:"primary",onClick:t[2]||(t[2]=Object(r["withModifiers"])((function(){}),["prevent"]))},{default:Object(r["withCtx"])((function(){return[Y]})),_:1})])):Object(r["createCommentVNode"])("",!0),e.canDelete?(Object(r["openBlock"])(),Object(r["createBlock"])("span",I,[q,Object(r["createVNode"])(s,{type:"primary",onClick:t[3]||(t[3]=Object(r["withModifiers"])((function(){}),["prevent"]))},{default:Object(r["withCtx"])((function(){return[z]})),_:1})])):Object(r["createCommentVNode"])("",!0)])])])])]})),_:1})])}var U=(u=Object(m["a"])({props:{userAvatarUrl:String,userName:String,content:String,level:Number,date:String,isPoster:Boolean,isYou:Boolean},emits:["replyTextClick"],computed:{canDelete:function(){return this.isYou}},mounted:function(){this.$refs.content.innerHTML=this.content},watch:{content:function(e){this.$refs.content.innerHTML=e}}}),u(d=function(e){Object(O["a"])(c,e);var t=Object(h["a"])(c);function c(){return Object(j["a"])(this,c),t.apply(this,arguments)}return c}(m["b"]))||d);c("05cc");U.render=M;var H=U;function E(){Prism.highlightAll()}var J=function(e){Object(O["a"])(c,e);var t=Object(h["a"])(c);function c(){return Object(j["a"])(this,c),t.apply(this,arguments)}return c}(m["b"]);J=Object(f["a"])([Object(m["a"])({components:{"rich-text-editor":N["a"],"post-page-level":H},data:function(){return{title:"",postId:"",currentPage:1,replyBoxTextArea:"",isLoadingPage:!1,levelList:[],levelNum:0,filteredLevelNum:0,pageSize:2,base_url:"/melongarden/"}},created:function(){var e=this;this.$watch((function(){return e.$route.query}),(function(){e.$route.path==="".concat(e.base_url,"post")&&e.loadLevels()}))},mounted:function(){this.loadLevels()},methods:{onReply:function(){var e=this;""!==this.replyBoxTextArea?g["a"].reply(this.postId,this.replyBoxTextArea).then((function(){v.a.success("You've just replied in a post"),e.replyBoxTextArea="";var t=Math.ceil((e.levelNum+1)/e.pageSize);e.currentPage!==t?e.$router.push("/post?post_id=".concat(e.postId,"&page=").concat(t)):e.loadLevels()})).catch((function(e){v.a.error("Can't reply. "+e)})):v.a.error("The reply content mustn't be empty!")},onReplyTextClicked:function(){window.scroll({top:document.body.clientHeight,left:0,behavior:"smooth"})},loadLevels:function(){var e=this;this.postId=this.$route.query.post_id;var t=Number.parseInt(this.$route.query.page);t||(t=1);var c=this.$route.query.search||"";this.isLoadingPage=!0,g["a"].getPostInfo(this.postId).then((function(r){var o=r;return e.levelNum=o.levelNum,e.title=o.title,e.currentPage!==t&&(e.currentPage=-1),g["a"].getPostLevelList(e.postId,e.pageSize,t,c)})).then((function(c){var r=c;e.levelList=r.levels,e.filteredLevelNum=r.levelNum,e.currentPage=t,e.$nextTick((function(){E()}))})).catch((function(e){v.a.error("Error happing while loading post page. "+e)})).then((function(){e.isLoadingPage=!1}))},onCurrentPageChanged:function(e){var t={path:this.$route.path,query:Object(p["a"])(Object(p["a"])({},this.$route.query),{},{page:e}),hash:this.$route.hash,params:Object(p["a"])({},this.$route.params)};this.$router.push(t)}}})],J);var F=J;c("345c");F.render=s;t["default"]=F},"05cc":function(e,t,c){"use strict";c("996c")},"345c":function(e,t,c){"use strict";c("a81c")},"996c":function(e,t,c){},a81c:function(e,t,c){}}]);
//# sourceMappingURL=chunk-7adbea62.9e9ca284.js.map